######################################################################
# Copyright (C) 2010 Stephan Enderlein <stephan@freifunk-dresden.de
# GNU General Public License Version 3
#
#   The order is important for device specific builds.
#   In this case output directory is not deleted and device specific
#   files (variants) are placed in exisiting directory.
#
#       Example for device specific:
#               ramips.mt7621.ubnt-edge
#
#   If no variant is set, then platform directory is deleted before.
#   So consider order and definition of variants when specifying targets!
#
# config file names:
#	config.<target>.<subtarget>[.<variant>][.<openwrt_variant>]
#
#########################################################################

{
 "targets": [
# ------------- default values ------------------------------
# this block must come always first, because the first block is used
# as default
	{
		"name":"default",			# currently just an unused name (only displayed)
							# if following blocks do not specifiy there own value
		"target":"ath79",
		"subtarget":"generic",
		"variant":"",				# used to distinguish different configs
							# e.g. 	could be name of a router or
							#      	a set of routers when selecting "multiple devices"
							#	via "make menuconfig"

		"openwrt_rev":"b4d7885af70a42df7577157b96f941500bd17bfb", # (HEAD, tag: v21.02.1)
		"openwrt_variant":"",			# creates a separate buildroot. use it for low-mem devices
							# where no kernel modules (e.g.: usb) must be included.
							# Note that selecting some packages as module could have
							# dependencies to kernel modules/libs, that are included
							# in image also if package is optional (ipk)
							# This value is added to config file name
							# Example value could be : "lowmem" or "ram32mbyte"

		"selector-config":"21.02",		# used to select config
		"selector-feeds":"21.02",		# used to select feeds
		"selector-patches":"21.02",		# used to select patches
		"selector-files":"21.02",

		# generates the feeds/feeds-[selector].conf
		# for short commit value use: git log --abbrev-commit


		"feeds" : [
			{"type":"src-link", 	"name":"ddmesh_own",	"src":"feeds-own" },
			{"type":"src-git", 	"name":"packages",	"src":"https://git.openwrt.org/feed/packages.git",	"rev":"26e9cbc4c"}, # 21.02
			{"type":"src-git", 	"name":"routing",	"src":"https://git.openwrt.org/feed/routing.git",	"rev":"c524118"}    # 21.02
		  ],

		# install addional packages from feeds (see feeds.conf)
#		"packages":["libpam","libcap","libgnutls","libopenldap",
#				"libidn2","libssh2","libnetsnmp",
#				"libcap", "jansson", "kmod-cryptodev", "liblzma" ],
		"packages":["libpam", "libnetsnmp"],

		# apply additional target patches
		"target-patches":[""]
	},

# =================== specific targets =======================================================


# ---------- openwrt 18 -----------------------------------------------------------------------
	{
		"name":"ar71xx.tiny.lowmem",	# can be any name
		"target":"ar71xx",
		"subtarget":"tiny",
		"openwrt_rev":"5625f5bc36954d644cb80adf8de47854c65d91c3", # 18.06 08-11-2020
		"openwrt_variant":"lowmem",
		"selector-config":"18.06",		# used to select config
		"selector-feeds":"18.06",		# used to select feeds
		"selector-patches":"18.06",		# used to select patches
		"selector-files":"18.06",
		"feeds" : [
				{"type":"src-link", 	"name":"ddmesh_own",	"src":"feeds-own" },
				{"type":"src-git", 	"name":"packages",	"src":"https://git.openwrt.org/feed/packages.git",	"rev":"de3766173"},
				{"type":"src-git", 	"name":"routing",	"src":"https://git.openwrt.org/feed/routing.git",	"rev":"ff5100e"}
			  ],
		"packages":["libpam","libcap","libgnutls","libopenldap",
				"libidn2","libssh2","libnetsnmp",
				"libcap", "jansson", "kmod-cryptodev", "liblzma" ]
	},
	{
		"name":"ar71xx.generic.lowmem",	# can be any name
		"target":"ar71xx",
		"subtarget":"generic",
		"openwrt_rev":"5625f5bc36954d644cb80adf8de47854c65d91c3", # 18.06 08-11-2020
		"openwrt_variant":"lowmem",
		"selector-config":"18.06",		# used to select config
		"selector-feeds":"18.06",		# used to select feeds
		"selector-patches":"18.06",		# used to select patches
		"selector-files":"18.06",
		"feeds" : [
				{"type":"src-link", 	"name":"ddmesh_own",	"src":"feeds-own" },
				{"type":"src-git", 	"name":"packages",	"src":"https://git.openwrt.org/feed/packages.git",	"rev":"de3766173"},
				{"type":"src-git", 	"name":"routing",	"src":"https://git.openwrt.org/feed/routing.git",	"rev":"ff5100e"}
			  ],
		"packages":["libpam","libcap","libgnutls","libopenldap",
				"libidn2","libssh2","libnetsnmp",
				"libcap", "jansson", "kmod-cryptodev", "liblzma" ]
	},
	{
		"name":"ramips.rt305x.tiny.lowmem",	# can be any name
		"target":"ramips",
		"subtarget":"rt305x",
		"variant":"tiny",
		"openwrt_rev":"5625f5bc36954d644cb80adf8de47854c65d91c3", # 18.06 08-11-2020
		"openwrt_variant":"lowmem",
		"selector-config":"18.06",		# used to select config
		"selector-feeds":"18.06",		# used to select feeds
		"selector-patches":"18.06",		# used to select patches
		"selector-files":"18.06",
		"feeds" : [
				{"type":"src-link", 	"name":"ddmesh_own",	"src":"feeds-own" },
				{"type":"src-git", 	"name":"packages",	"src":"https://git.openwrt.org/feed/packages.git",	"rev":"de3766173"},
				{"type":"src-git", 	"name":"routing",	"src":"https://git.openwrt.org/feed/routing.git",	"rev":"ff5100e"}
			  ],
		"packages":["libpam","libcap","libgnutls","libopenldap",
				"libidn2","libssh2","libnetsnmp",
				"libcap", "jansson", "kmod-cryptodev", "liblzma" ]
	},
# ---------- openwrt 21 -----------------------------------------------------------------------
	{
		"name":"x86.generic.offloader",
		"target":"x86",
		"subtarget":"generic",
		"variant":"offloader"
	},
	{
		"name":"x86.64.offloader",
		"target":"x86",
		"subtarget":"64",
		"variant":"offloader",
		"packages":["qemu", "libpam", "libgnutls", "libopenldap", "libidn2", "libssh2", "libcap", "liblzma", "libnetsnmp", "jansson", "zabbix" ]
	},
	{
		"name":"ramips.mt7621.generic",
		"target":"ramips",
		"subtarget":"mt7621",
		"variant":"generic"
	},
	{
		"name":"ramips.mt7621.offloader",
		"target":"ramips",
		"subtarget":"mt7621",
		"variant":"offloader"	# specific target (overwrites previous generic only for this device)
	},
	{
		"name":"ramips.mt76x8.generic",
		"target":"ramips",
		"subtarget":"mt76x8",
		"variant":"generic"
	},
	{
		"name":"lantiq.xrx200",
		"target":"lantiq",
		"subtarget":"xrx200"
#	,	"openwrt_variant":"patchset-1",
#		"target-patches":["lantiq-0900-rollback.patch", "lantiq-0901-add-icu-smp-support.patch", "lantiq-0902-backport-vanilla-eth-driver.patch"]
	},
	{
		"name":"lantiq.xway",
		"target":"lantiq",
		"subtarget":"xway"
	},
	{	# created for Orange Pi R1
		"name":"sunxi.cortexa7.offloader",
		"target":"sunxi",
		"subtarget":"cortexa7",
		"variant":"offloader"
	},
	{
		"name":"ath79.generic",
		"target":"ath79",
		"subtarget":"generic"
	},
	{
		"name":"ath79.generic.gl-mifi",
		"target":"ath79",
		"subtarget":"generic",
		"variant":"gl-mifi"
	},
	{
		"name":"ath79.nand",
		"target":"ath79",
		"subtarget":"nand"
	},
	{
		"name":"ath79.generic.smallbuffers",
		"target":"ath79",
		"subtarget":"generic",
		"variant":"smallbuffers"
	},
	{	# created for fritzbox 4040
		"name":"ipq40xx.generic",
		"target":"ipq40xx",
		"subtarget":"generic"
	},
	{
		"name":"ipq40xx.generic.fritz-tffs-nand",
		"target":"ipq40xx",
		"subtarget":"generic",
		"variant":"fritz-tffs-nand"
	},
	{
		"name":"bcm53xx.generic.arm",
		"target":"bcm53xx",
		"subtarget":"generic",
		"openwrt_variant":"arm"
	},
	{
		"name":"mpc85xx.p1020",
		"target":"mpc85xx",
		"subtarget":"p1020"
	}

# ---------- master 21 -----------------------------------------------------------------------
#	,{
#		"name":"master.ath79.generic",	# can be any name
#		"target":"ath79",
#		"subtarget":"generic",
#		"openwrt_rev":"master", # 
#		"selector-config":"master",		# used to select config
#		"selector-feeds":"master",		# used to select feeds
#		"selector-patches":"master",		# used to select patches
#		"selector-files":"master",
#		"packages":[ ],
#		"feeds" : [
#				{"type":"src-link", 	"name":"ddmesh_own",	"src":"feeds-own" },
#				{"type":"src-git", 	"name":"packages",	"src":"https://git.openwrt.org/feed/packages.git",	"rev":"master"},
#				{"type":"src-git", 	"name":"routing",	"src":"https://git.openwrt.org/feed/routing.git",	"rev":"master"}
#			  ]
#	}


 ]
}
